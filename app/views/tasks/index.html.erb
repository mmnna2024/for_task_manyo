<h1><%= t('.title') %></h1>

<%= form_with(scope: :search, local: true, method: :get) do |form| %>

<div class="field">
<%= form.label :status, t('activerecord.attributes.task.status')  %>
<%= form.select :status, options_for_select(Task.statuses.keys), include_blank: true %> <br>
<%= form.label :title, t('activerecord.attributes.task.title')  %>
<%= form.text_field :title %>
</div>

<div class="actions">
<%= form.submit "検索", id: 'search_task' %>
</div>

<% end %>

<table>
  <thead>
    <tr>
      <th><%= t('activerecord.attributes.task.title') %></th>
      <th><%= t('activerecord.attributes.task.content') %></th>
      <th><%= t('activerecord.attributes.task.created_at') %></th>
      <th><%= link_to "終了期限", sort_deadline_on: true %></th>
      <th><%= link_to "優先度", sort_priority: true %></th>
      <th><%= t('activerecord.attributes.task.status') %></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
      <% if task.user_id == current_user.id %>
      <tr class="task_list">
        <td><%= task.title %></td>
        <td><%= task.content %></td>
        <td><%= l task.created_at %></td>
        <td><%= task.deadline_on %></td>
        <td><%= task.priority %></td>
        <td><%= task.status %></td>
        <td><%= link_to t('helpers.links.show'), task, class: "show-task" %></td>
        <td><%= link_to t('helpers.links.edit'), edit_task_path(task), class: "edit-task" %></td>
        <td><%= link_to t('helpers.links.destroy'), task,
          method: :delete,
          data: { confirm: t('helpers.messages.destroy_confirm') },
          class: "destroy-task" %>
        </td>
      </tr>
      <% end %>
    <% end %>
  </tbody>
</table>
<%= paginate @tasks %>
<br>

